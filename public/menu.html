<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HerbalSys - Dashboard</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/static/css/styleMenu.css">
</head>

<body class="bg-light">

  <!-- NAVBAR (mobile) -->
  <nav class="navbar navbar-light bg-white shadow-sm d-lg-none">
    <div class="container-fluid">
      <button class="btn btn-outline-success" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar"
        aria-controls="sidebar">
        ☰
      </button>
      <span class="navbar-brand mb-0 h1">HerbalSys</span>
    </div>
  </nav>

  <div class="container-fluid">
    <div class="row">
      <!-- SIDEBAR -->
      <aside id="sidebar" class="col-lg-2 d-none d-lg-block bg-white vh-100 border-end pt-4">
        <div class="px-3">
          <div class="d-flex align-items-center mb-4">
            <div class="me-2">
              <svg width="34" height="34" viewBox="0 0 24 24" fill="none" class="text-success">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.2"></circle>
              </svg>
            </div>
            <div>
              <h6 class="mb-0">HerbalSys</h6>
              <small class="text-muted">Tienda Naturista P.O.S</small>
            </div>
          </div>

          <ul class="nav nav-pills flex-column">
            <li class="nav-item mb-1"><a class="nav-link active" href="#">Dashboard</a></li>
            <li class="nav-item mb-1"><a id="btnInventario" class="nav-link" href="/pages/inventario.html">Inventario</a>
            </li>
            <!--<li class="nav-item mb-1"><a id="btnLibroVentas" class="nav-link"
                href="/pages/reportes.html">Reportes</a></li>-->
            <!--<li class="nav-item mt-3"><a class="nav-link text-muted small" href="#">Ajustes</a></li>-->
          </ul>

          <div class="mt-4 small text-muted">
            Rol: <strong>Admin</strong>
          </div>
        </div>
      </aside>

      <!-- OFFCANVAS (móvil) -->
      <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebar" aria-labelledby="sidebarLabel">
        <div class="offcanvas-header">
          <h5 id="sidebarLabel">HerbalSys</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="nav nav-pills flex-column">
            <li class="nav-item mb-1"><a class="nav-link active" href="#">Dashboard</a></li>
            <li class="nav-item mb-1"><a id="btnInventario" class="nav-link" href="/pages/inventario.html">Inventario</a>
            </li>
            <li class="nav-item mb-1"><a id="btnLibroVentas" class="nav-link" href="/pages/libroVentas.html">Libro de
                Ventas</a></li>
            <li class="nav-item mb-1"><a id="btnGestorClientes" class="nav-link"
                href="/pages/gestorClientesMenu.html">Gestor de Clientes</a></li>
            <li class="nav-item mb-1"><a id="btnFacturasElectronicas" class="nav-link"
                href="/pages/facturasElectronicas.html">Facturas Electrónicas</a></li>
          </ul>
        </div>
      </div>

      <!-- MAIN CONTENT -->
      <main class="col-lg-10 ms-auto px-4">
        <div class="row g-3 py-4">

          <!-- Logout (asegúrate de que exista para menu.js) -->
          <div class="col-12 d-flex justify-content-end mb-2">
            <button id="logoutBtn" class="btn btn-outline-secondary">Cerrar sesión</button>
          </div>

          <!-- Métricas resumen de inventario -->
          <div class="col-12">
            <div class="row g-3">
              <div class="col-sm-4">
                <div class="card-metric">
                  <h6>Valor Inventario</h6>
                  <h4 id="inventoryValue" class="metric-value">$0.00</h4>
                  <div class="metric-label text-muted">Valor total stock</div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card-metric">
                  <h6>Productos con stock bajo</h6>
                  <h4 id="lowStockCount" class="metric-value">0</h4>
                  <div class="metric-label text-muted">Productos con stock &lt; 2</div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card-metric">
                  <h6>Productos agregados hoy</h6>
                  <h4 id="activeClients" class="metric-value">0</h4>
                  <div class="metric-label text-muted">Productos añadidos hoy</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Alertas (lista) -->
          <div class="col-12 mt-3">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">Alertas</h6>
                <ul id="alertsList" class="list-group list-group-flush">
                  <li class="list-group-item">Cargando...</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Buscador / filtros y tabla de productos -->
          <div class="col-12 mt-3">
            <div class="card shadow-sm mb-3">
              <div class="card-body">
                <div class="row g-2 align-items-center">
                  <div class="col-md-3">
                    <input id="productSearch" type="text" class="form-control" placeholder="Buscar producto">
                  </div>
                  <div class="col-md-3">
                    <select id="filterCategory" class="form-select">
                      <option value="">Todas Categorías</option>
                    </select>
                  </div>
                  <div class="col-md-3">
                    <select id="filterSupplier" class="form-select">
                      <option value="">Todos Proveedores</option>
                    </select>
                  </div>
                  <div class="col-md-3 d-flex">
                    <button id="btnSearchProducts" class="btn btn-success w-100">Buscar</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="card shadow-sm">
              <div class="card-body p-0">
                <div class="table-responsive">
                  <table id="productsTable" class="table table-hover mb-0">
                    <thead class="table-light">
                      <tr>
                        <th>Nombre</th>
                        <th>ID</th>
                        <th>Categoria</th>
                        <th>Stock</th>
                        <th>Vencimiento</th>
                        <th>Proveedor</th>
                        <th class="text-end">Acciones</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr><td colspan="7" class="text-center text-muted">Cargando...</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- Modal producto (opcional: necesario si usas create/edit en menu.js) -->
          <div class="modal fade" id="productModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Producto</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                  <form id="productForm" onsubmit="return false;">
                    <div class="row g-2">
                      <div class="col-md-6">
                        <label for="p_name" class="form-label">Nombre</label>
                        <input id="p_name" class="form-control" required>
                      </div>
                      <div class="col-md-6">
                        <label for="p_sku" class="form-label">ID</label>
                        <input id="p_sku" class="form-control" required>
                      </div>
                      <div class="col-md-4">
                        <label for="p_category" class="form-label">Categoria</label>
                        <select id="p_category" class="form-select"></select>
                      </div>
                      <div class="col-md-4">
                        <label for="p_stock" class="form-label">Stock</label>
                        <input id="p_stock" type="number" class="form-control" min="0">
                      </div>
                      <div class="col-md-4">
                        <label for="p_exp" class="form-label">Fecha Vencimiento</label>
                        <input id="p_exp" type="date" class="form-control">
                      </div>
                      <div class="col-md-4">
                        <label for="p_supplier" class="form-label">Proveedor</label>
                        <select id="p_supplier" class="form-select"></select>
                      </div>
                      <div class="col-md-4">
                        <label for="p_pv" class="form-label">Precio Venta</label>
                        <input id="p_pv" type="number" class="form-control" min="0">
                      </div>
                      <div class="col-md-4">
                        <label for="p_pc" class="form-label">Precio Compra</label>
                        <input id="p_pc" type="number" class="form-control" min="0">
                      </div>
                      <div class="col-md-12">
                        <label for="p_desc" class="form-label">Descripción</label>
                        <input id="p_desc" class="form-control">
                      </div>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button id="saveProductBtn" class="btn btn-success">Guardar</button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </main>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Menu JS para autenticación y logout -->
  <script src="/static/js/menu.js"></script>
</body>

</html>