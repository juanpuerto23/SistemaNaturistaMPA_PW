<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HerbalSys - Dashboard</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/styleMenu.css">
</head>

<body class="bg-light">

  <!-- NAVBAR (mobile) -->
  <nav class="navbar navbar-light bg-white shadow-sm d-lg-none">
    <div class="container-fluid">
      <button class="btn btn-outline-success" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar"
        aria-controls="sidebar">
        ☰
      </button>
      <span class="navbar-brand mb-0 h1">HerbalSys</span>
    </div>
  </nav>

  <div class="container-fluid">
    <div class="row">
      <!-- SIDEBAR -->
      <aside id="sidebar" class="col-lg-2 d-none d-lg-block bg-white vh-100 border-end pt-4">
        <div class="px-3">
          <div class="d-flex align-items-center mb-4">
            <div class="me-2">
              <svg width="34" height="34" viewBox="0 0 24 24" fill="none" class="text-success">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.2"></circle>
              </svg>
            </div>
            <div>
              <h6 class="mb-0">HerbalSys</h6>
              <small class="text-muted">Tienda Naturista P.O.S</small>
            </div>
          </div>

          <ul class="nav nav-pills flex-column">
            <li class="nav-item mb-1"><a class="nav-link active" href="#">Dashboard</a></li>
            <li class="nav-item mb-1"><a id="btnInventario" class="nav-link" href="pages/inventario.html">Inventario</a>
            </li>
            <li class="nav-item mb-1"><a id="btnLibroVentas" class="nav-link"
                href="pages/reportes.html">Reportes</a></li>
            <li class="nav-item mt-3"><a class="nav-link text-muted small" href="#">Ajustes</a></li>
          </ul>

          <div class="mt-4 small text-muted">
            Rol: <strong>Admin</strong>
          </div>
        </div>
      </aside>

      <!-- OFFCANVAS (móvil) -->
      <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebar" aria-labelledby="sidebarLabel">
        <div class="offcanvas-header">
          <h5 id="sidebarLabel">HerbalSys</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="nav nav-pills flex-column">
            <li class="nav-item mb-1"><a class="nav-link active" href="#">Dashboard</a></li>
            <li class="nav-item mb-1"><a id="btnInventario" class="nav-link" href="pages/inventario.html">Inventario</a>
            </li>
            <li class="nav-item mb-1"><a id="btnLibroVentas" class="nav-link" href="pages/libroVentas.html">Libro de
                Ventas</a></li>
            <li class="nav-item mb-1"><a id="btnGestorClientes" class="nav-link"
                href="pages/gestorClientesMenu.html">Gestor de Clientes</a></li>
            <li class="nav-item mb-1"><a id="btnFacturasElectronicas" class="nav-link"
                href="pages/facturasElectronicas.html">Facturas Electrónicas</a></li>
          </ul>
        </div>
      </div>

      <!-- MAIN CONTENT -->
      <main class="col-lg-10 ms-auto px-4">
        <div class="row g-3 py-4">
          <div class="col-12 d-flex justify-content-between align-items-center">
            <div class="ms-auto d-flex gap-2 align-items-center">
              <button class="btn btn-outline-secondary btn-sm">Perfil</button>
              <button class="btn btn-success btn-sm" onclick="window.location.href='/public/index.html'">Cerrar sesión</button>
            </div>
          </div>

          <!-- Tarjetas resumen -->
          <section class="col-12">
            <div class="row gy-3">
              <div class="col-md-3">
                <div class="card shadow-sm">
                  <div class="card-body">
                    <small class="text-muted">Inventario Total</small>
                    <h4 id="inventoryValue" class="mt-2">$0</h4>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card shadow-sm">
                  <div class="card-body">
                    <small class="text-muted">Alertas de Stock</small>
                    <h4 id="lowStockCount" class="mt-2">0</h4>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card shadow-sm">
                  <div class="card-body">
                    <small class="text-muted">Ventas del Día</small>
                    <h4 id="todaysSales" class="mt-2">$0</h4>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card shadow-sm">
                  <div class="card-body">
                    <small class="text-muted">Clientes Activos</small>
                    <h4 id="activeClients" class="mt-2">0</h4>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- CONTENEDOR PRINCIPAL: Quick Actions + Buscador + Tabla (izq) | Alerts + Clientes (derecha) -->
          <section class="col-12">
            <div class="row gx-4">
              <!-- COLUMNA IZQUIERDA: buscador y tabla -->
              <div class="col-xl-8">
                <!-- Quick actions -->
                <div class="card shadow-sm mb-3">
                  <div class="card-body d-flex flex-wrap gap-2 align-items-center">
                    <div class="me-auto"><strong>Acción Rápida</strong></div>
                    <!-- botones animables: tienen data-animate y clase .btn-animate -->
                    <button class="btn btn-success btn-animate" data-action="addSale" data-animate="pulse">Añadir
                      Venta</button>
                    <button class="btn btn-outline-success btn-animate" data-action="addProduct" data-animate="pop"
                      data-bs-toggle="modal" data-bs-target="#productModal">Añadir Producto</button>
                    <button class="btn btn-outline-secondary btn-animate" data-action="adjustStock"
                      data-animate="pop">Ajustar Stock</button>
                    <button class="btn btn-success btn-outline btn-animate" data-action="createPO"
                      data-animate="pop">Crear Orden Pedido</button>
                  </div>
                </div>

                <!-- Search & filters -->
                <div class="card shadow-sm mb-3">
                  <div class="card-body">
                    <div class="row g-2 align-items-center">
                      <div class="col-md-3">
                        <input id="productSearch" class="form-control" type="text" placeholder="Buscar Productos..."
                          aria-label="Buscar productos">
                      </div>
                      <div class="col-md-3">
                        <select id="filterCategory" class="form-select">
                          <option value="">Todas Categorias</option>
                          <!-- categories loaded dynamically -->
                        </select>
                      </div>
                      <div class="col-md-3">
                        <select id="filterSupplier" class="form-select">
                          <option value="">Todos Proveedores</option>
                          <!-- suppliers loaded dynamically -->
                        </select>
                      </div>
                      <div class="col-md-2 d-flex gap-2">
                        <button id="btnSearchProducts" class="btn btn-success w-100">Buscar</button>
                        <button id="btnAddProduct" class="btn btn-outline-success w-100" data-bs-toggle="modal"
                          data-bs-target="#productModal">Añadir Producto</button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- TABLE (se actualizará al buscar) -->
                <div class="card shadow-sm">
                  <div class="card-body p-0">
                    <div class="table-responsive">
                      <table id="productsTable" class="table table-hover mb-0">
                        <thead class="table-light">
                          <tr>
                            <th>Nombre</th>
                            <th>ID</th>
                            <th>Categoria</th>
                            <th>Stock Actual</th>
                            <th>Fecha Vencimiento</th>
                            <th>Proovedor</th>
                            <th class="text-end">Accion</th>
                          </tr>
                        </thead>
                        <tbody>
                          <!-- filas llenadas por JS -->
                          <tr class="text-center">
                            <td colspan="7" class="py-5 text-muted">Usar la barra de busqueda de arriba</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>

              <!-- COLUMNA DERECHA: alertas y clientes -->
              <div class="col-xl-4">
                <div class="card shadow-sm mb-3">
                  <div class="card-body">
                    <h6 class="card-title">Alerta Inventario</h6>
                    <ul id="alertsList" class="list-group list-group-flush">
                      <!-- items dinámicos -->
                      <li class="list-group-item">No alertas</li>
                    </ul>
                  </div>
                </div>

                <div class="card shadow-sm mb-3">
                  <div class="card-body">
                    <h6 class="card-title">Ventas / POS</h6>
                    <div class="d-grid gap-2" id="posQuickAdd">
                      <!-- productos populares para añadir a carrito (llenado dinámicamente) -->
                    </div>
                  </div>
                </div>

                <div class="card shadow-sm mb-3">
                  <div class="card-body">
                    <h6 class="card-title">Clientes</h6>
                    <div class="table-responsive">
                      <table id="clientsTable" class="table table-sm mb-0">
                        <thead class="table-light">
                          <tr>
                            <th>Nombre</th>
                            <th>Contacto</th>
                          </tr>
                        </thead>
                        <tbody>
                          <!-- dinámico -->
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="card shadow-sm">
                  <div class="card-body">
                    <h6 class="card-title">Reportes</h6>
                    <div class="d-grid gap-2">
                      <a href="#" class="btn btn-outline-success">Generar Reporte</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- MODALES (ejemplo: añadir/editar producto) -->
          <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 id="productModalLabel" class="modal-title">Añadir Producto</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                  <form id="productForm" onsubmit="return false;">
                    <div class="row g-2">
                      <div class="col-md-6">
                        <label class="form-label">Nombre</label>
                        <input id="p_name" class="form-control" required>
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">ID</label>
                        <input id="p_sku" class="form-control" required>
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">Categoria</label>
                        <select id="p_category" class="form-select"></select>
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">Stock</label>
                        <input id="p_stock" type="number" class="form-control" min="0">
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">Fecha Vencimiento</label>
                        <input id="p_exp" type="date" class="form-control" required>
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">Proveedor</label>
                        <select id="p_supplier" class="form-select" required></select>
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">Precio Venta</label>
                        <input id="p_pv" type="number" class="form-control" min="0"></input>
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">Precio Compra</label>
                        <input id="p_pc" type="number" class="form-control" min="0"></input>
                      </div>
                      <div class="col-md-12">
                        <label class="form-label">Descripción</label>
                        <input id="p_desc" class="form-control"></input>
                      </div>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                  <button id="saveProductBtn" type="button" class="btn btn-success">Guardar</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Bootstrap JS & dependencies (CDN) -->
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

          <!-- Placeholder: JS vendrá aquí -->
          <script>
            /*
            EXPLICACIÓN RÁPIDA:
            - Los elementos con id (inventoryValue, lowStockCount, productsTable, alertsList, etc.) deben actualizarse desde tu JS después de llamar a las APIs.
            - Botones con data-action tienen un valor que puedes usar para mapear acciones (ej. addProduct, addSale).
            - Los selects filterCategory y filterSupplier se deben poblar al inicializar la página mediante /api/categories y /api/suppliers.
            - El botón #btnSearchProducts debe hacer fetch a /api/products?search=...&category=...&supplier=...
            - Modal #productModal usa #productForm; #saveProductBtn envía POST/PUT a /api/products.
            */
          </script>

        </div>
      </main>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>